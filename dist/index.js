!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n,o,a,l,u,s,c,f,p,d,h,v,y,b,m,g,O,j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},w=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),k=V(r(8)),P=r(1),S=V(r(13)),_=V(r(12));function V(e){return e&&e.__esModule?e:{default:e}}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function z(e,t,r,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=0,F=(i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"defaultValue",n,this),C(this,"disabled",o,this),C(this,"errors",a,this),C(this,"label",l,this),C(this,"name",u,this),C(this,"placeholder",s,this),C(this,"pristine",c,this),C(this,"readOnly",f,this),C(this,"initialValue",p,this),C(this,"value",d,this),C(this,"validateDebounceDurationMs",h,this),this.form=void 0,this.initialConfig=void 0,this.parent=void 0,this.rules=[],this.transform=void 0,this.debouncedFormValidate=void 0,C(this,"enable",v,this),C(this,"disable",y,this),C(this,"setPristine",b,this),C(this,"setLabel",m,this),C(this,"setRules",g,this),C(this,"setFieldStates",O,this),this._id=++D,this.form=t,this.initialConfig=r,this.adjacentFields=this.initialConfig.adjacentFields,delete this.initialConfig.adjacentFields,(0,P.extendObservable)(this,this.initialConfig),this.init(r.value)}return w(e,[{key:"validateWithDebounce",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.debouncedFormValidate&&clearTimeout(this.debouncedFormValidate),this.debouncedFormValidate=setTimeout((0,P.action)(function(){!0===t.removePristineState&&(e.pristine=!1),e.form.validate()}),this.validateDebounceDurationMs)}},{key:"init",value:function(e){(0,P.extendObservable)(this,this.initialConfig);var t=(0,_.default)({value:e,defaultValue:this.defaultValue});this.setValue(t,{validate:!1}),this.initialValue=t,this.pristine=!0}},{key:"reset",value:function(){var e=(0,P.toJS)(this.initialValue);this.init(e)}},{key:"setValue",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).validate,r=void 0===t||t;this.value=this._transformInValue((0,P.toJS)(e)),r&&this.validateWithDebounce()}},{key:"onChange",value:function(e){var t;t=e&&e.target?e.target.value:e,this.value=t,this.validateWithDebounce({removePristineState:!0})}},{key:"validate",value:function(e){if(this.rules){var t=E({},this.name,(0,P.toJS)(this.rules)),r=E({},this.name,this.label||this.name),i=this.form.model,n=new k.default(j({model:i},e),t,this.messages);n.setAttributeNames(r),n.check(),this.errors=n.errors.get(this.name)}else this.errors=[]}},{key:"getProps",value:function(){return{name:this.name,value:this.value,placeholder:this.placeholder,disabled:this.disabled}}},{key:"getInitialValue",value:function(){return(0,P.toJS)(this.initialValue)}},{key:"getValue",value:function(){return this._transformOutValue((0,P.toJS)(this.value))}},{key:"_transformInValue",value:function(e){return this.transform&&this.transform.in?this.transform.in(e,this.form,this):e}},{key:"_transformOutValue",value:function(e){return this.transform&&this.transform.out?this.transform.out(e,this.form,this):e}},{key:"remove",value:function(){this.parent?this.parent.remove(this):console.warn("Calling remove() on a field with no parent",this.name)}},{key:"dirty",get:function(){return!(0,S.default)(this.getValue(),this.getInitialValue())}},{key:"hasError",get:function(){return this.errors&&this.errors.length>0}},{key:"valid",get:function(){return!this.hasError}}]),e}(),n=z(i.prototype,"defaultValue",[P.observable],{enumerable:!0,initializer:function(){return""}}),o=z(i.prototype,"disabled",[P.observable],{enumerable:!0,initializer:function(){return!1}}),a=z(i.prototype,"errors",[P.observable],{enumerable:!0,initializer:function(){return[]}}),l=z(i.prototype,"label",[P.observable],{enumerable:!0,initializer:null}),u=z(i.prototype,"name",[P.observable],{enumerable:!0,initializer:null}),s=z(i.prototype,"placeholder",[P.observable],{enumerable:!0,initializer:null}),c=z(i.prototype,"pristine",[P.observable],{enumerable:!0,initializer:function(){return!0}}),f=z(i.prototype,"readOnly",[P.observable],{enumerable:!0,initializer:function(){return!1}}),p=z(i.prototype,"initialValue",[P.observable],{enumerable:!0,initializer:function(){}}),d=z(i.prototype,"value",[P.observable],{enumerable:!0,initializer:null}),h=z(i.prototype,"validateDebounceDurationMs",[P.observable],{enumerable:!0,initializer:function(){return 250}}),z(i.prototype,"init",[P.action],Object.getOwnPropertyDescriptor(i.prototype,"init"),i.prototype),z(i.prototype,"reset",[P.action],Object.getOwnPropertyDescriptor(i.prototype,"reset"),i.prototype),v=z(i.prototype,"enable",[P.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.disabled=!1}}}),y=z(i.prototype,"disable",[P.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.disabled=!0}}}),b=z(i.prototype,"setPristine",[P.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.pristine=t}}}),m=z(i.prototype,"setLabel",[P.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.label=t}}}),g=z(i.prototype,"setRules",[P.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).validate,i=void 0===r||r;e.rules=t,i&&e.form.validate()}}}),O=z(i.prototype,"setFieldStates",[P.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.fieldStates=t,e.form.validate()}}}),z(i.prototype,"setValue",[P.action],Object.getOwnPropertyDescriptor(i.prototype,"setValue"),i.prototype),z(i.prototype,"onChange",[P.action],Object.getOwnPropertyDescriptor(i.prototype,"onChange"),i.prototype),z(i.prototype,"dirty",[P.computed],Object.getOwnPropertyDescriptor(i.prototype,"dirty"),i.prototype),z(i.prototype,"hasError",[P.computed],Object.getOwnPropertyDescriptor(i.prototype,"hasError"),i.prototype),z(i.prototype,"valid",[P.computed],Object.getOwnPropertyDescriptor(i.prototype,"valid"),i.prototype),z(i.prototype,"validate",[P.action],Object.getOwnPropertyDescriptor(i.prototype,"validate"),i.prototype),z(i.prototype,"remove",[P.action],Object.getOwnPropertyDescriptor(i.prototype,"remove"),i.prototype),i);t.default=F},function(e,t){e.exports=mobx},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function e(t,r,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,i)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(i):void 0},s=r(1),c=h(r(0)),f=h(r(9)),p=h(r(7)),d=h(r(6));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t,r,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(i=function(e){function t(){var e,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return r=i=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),v(i,"fieldStates",n,i),v(i,"invalidChildren",o,i),y(i,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default),l(t,[{key:"getFieldConfigs",value:function(){var e=this.initialConfig.originalName+"[]";return this.form.fieldConfigs.filter(function(t){return t.name.startsWith(e)})}},{key:"init",value:function(e){var t=this;this.initialValue!==e&&(this.initialValue=this._transformInValue((0,s.toJS)(e)),this.fieldStates.clear(),Array.isArray(e)&&e.forEach(function(e){return t.add(e,{validate:!1,onInit:!0})}))}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.insertIdx,i=t.validate,n=void 0===i||i,o=this.buildFieldState(e,t);return r>=0?this.fieldStates.splice(r,0,o):this.fieldStates.push(o),n&&this.form.validate(),o}},{key:"buildFieldState",value:function(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onInit,i=void 0!==r&&r,n={};return this.getFieldConfigs().forEach(function(r){var o=r.name.substring(t.initialConfig.originalName.length+3),l=(0,p.default)(e,o.endsWith("[]")?o.slice(0,-2):o),u=a({},r);i&&void 0!==l&&(u.value=l),u.parent=t,u.adjacentFields=n;var s=(0,f.default)(t.form,o,u);s&&(n[s.name]=s,i||void 0===l||s.setValue(l))}),n}},{key:"remove",value:function(e){"number"==typeof e?this.fieldStates.splice(e,1):this.fieldStates.splice(this.fieldStates.findIndex(function(t){return t===e.adjacentFields}),1),this.form.validate()}},{key:"setValue",value:function(e){var t=this;this.fieldStates.clear(),Array.isArray(e)&&e.forEach(function(e){return t.add(e,{validate:!1})}),this.validateWithDebounce()}},{key:"map",value:function(e){return this.fieldStates.map(e)}},{key:"forEach",value:function(e){this.fieldStates.forEach(e)}},{key:"filter",value:function(e){return this.fieldStates.filter(e)}},{key:"some",value:function(e){return this.fieldStates.some(e)}},{key:"at",value:function(e){return this.fieldStates[e]}},{key:"size",value:function(){return this.fieldStates.length}},{key:"getDirtyAt",value:function(e){var t=this.at(e);return Object.keys(t).some(function(e){return t[e].dirty})}},{key:"validate",value:function(e){var r=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"validate",this).call(this,e);var i=[],n=0;this.fieldStates.forEach(function(t,o){if(!r.shouldExclude(t)){var a=(0,p.default)(e,r.name)[n];n+=1,r.ignore(a)||Object.keys(t).forEach(function(n){var l=t[n];l.validate(Object.assign({},e,a)),l.errors&&l.errors.length>0&&(r.errors.push(l.label+" ("+(o+1)+"): "+l.errors),i.includes(o)||i.push(o))})}}),this.invalidChildren=i}},{key:"shouldExclude",value:function(e){var t={};return Object.keys(e).forEach(function(r){(0,d.default)(t,r,(0,s.toJS)(e[r].getValue()))}),this.exclude(t)}},{key:"getValue",value:function(e){var t=this;if(e>=0){var r=this.fieldStates[e],i={};return Object.keys(r).forEach(function(e){(0,d.default)(i,e,(0,s.toJS)(r[e].getValue()))}),this.exclude(i)?void 0:i}var n=[];return this.fieldStates.forEach(function(e,r){var i=t.getValue(r);i&&n.push(i)}),this._transformOutValue(n)}},{key:"getInitialValue",value:function(){return void 0===this.initialValue?[]:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getInitialValue",this).call(this)}},{key:"exclude",value:function(e){return this.excludeChildren&&this.excludeChildren(e)}},{key:"ignore",value:function(e){return!e||this.ignoreChildren&&this.ignoreChildren(e)}},{key:"pristine",get:function(){return this.fieldStates.every(function(e){return Object.keys(e).every(function(t){return e[t].pristine})})}}]),t}(),n=b(i.prototype,"fieldStates",[s.observable],{enumerable:!0,initializer:function(){return[]}}),o=b(i.prototype,"invalidChildren",[s.observable],{enumerable:!0,initializer:function(){return[]}}),b(i.prototype,"init",[s.action],Object.getOwnPropertyDescriptor(i.prototype,"init"),i.prototype),b(i.prototype,"add",[s.action],Object.getOwnPropertyDescriptor(i.prototype,"add"),i.prototype),b(i.prototype,"buildFieldState",[s.action],Object.getOwnPropertyDescriptor(i.prototype,"buildFieldState"),i.prototype),b(i.prototype,"remove",[s.action],Object.getOwnPropertyDescriptor(i.prototype,"remove"),i.prototype),b(i.prototype,"setValue",[s.action],Object.getOwnPropertyDescriptor(i.prototype,"setValue"),i.prototype),b(i.prototype,"pristine",[s.computed],Object.getOwnPropertyDescriptor(i.prototype,"pristine"),i.prototype),b(i.prototype,"validate",[s.action],Object.getOwnPropertyDescriptor(i.prototype,"validate"),i.prototype),i);t.default=m},function(e,t){e.exports=react},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(3);t.default=(0,i.createContext)()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function e(t,r,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,i)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(i):void 0},l=r(1),u=f(r(8)),s=f(r(0)),c=f(r(2));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var h=(d((i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default),o(t,[{key:"add",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).validate,r=void 0===t||t;this.fieldStates.push(new s.default(this.form,n({},this.initialConfig,{value:e,parent:this}))),r&&this.form.validate()}},{key:"remove",value:function(e){var r=e;"number"!=typeof e&&(r=this.fieldStates.findIndex(function(t){return t===e})),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,r),this.form.validate()}},{key:"clearValue",value:function(){this.fieldStates.clear(),this.form.validate()}},{key:"setChildren",value:function(e){this.children=e,this.form.validate()}},{key:"validate",value:function(e){var t=this;s.default.prototype.validate.call(this,e),this.fieldStates.forEach(function(e,r){var i=t.getValue(r);if(t.ignore(i))e.errors=[];else{var n=p({},e.name,i),o=p({},e.name,t.children?t.children.rules:t.rules),a=p({},t.name,t.label||t.name),l=t.children?t.children.messages:{},s=new u.default(n,o,l);s.setAttributeNames(a),s.check(),e.errors=s.errors.get(e.name),e.errors&&e.errors.length>0&&t.errors.push(t.label+" ("+(r+1)+"): "+e.errors)}})}},{key:"getValue",value:function(e){if(e>=0){var r=this.fieldStates[e].getValue();return this.exclude(r)?void 0:r}return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getValue",this).call(this)}},{key:"pristine",get:function(){return this.fieldStates.every(function(e){return e.pristine})}},{key:"hasError",get:function(){return this.errors&&this.errors.length>0||this.fieldStates.some(function(e){return e.hasError})}}]),t}()).prototype,"add",[l.action],Object.getOwnPropertyDescriptor(i.prototype,"add"),i.prototype),d(i.prototype,"remove",[l.action],Object.getOwnPropertyDescriptor(i.prototype,"remove"),i.prototype),d(i.prototype,"clearValue",[l.action],Object.getOwnPropertyDescriptor(i.prototype,"clearValue"),i.prototype),d(i.prototype,"setChildren",[l.action],Object.getOwnPropertyDescriptor(i.prototype,"setChildren"),i.prototype),d(i.prototype,"validate",[l.action],Object.getOwnPropertyDescriptor(i.prototype,"validate"),i.prototype),d(i.prototype,"pristine",[l.computed],Object.getOwnPropertyDescriptor(i.prototype,"pristine"),i.prototype),d(i.prototype,"hasError",[l.computed],Object.getOwnPropertyDescriptor(i.prototype,"hasError"),i.prototype),i);t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(!e||!t)return null;for(var i=t.split("."),n=e,o=0;o<i.length-1;o+=1)n&&(n=n[i[o]]);n&&(n[i[o]]=r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e&&t?t.split(".").reduce(function(e,t){return e&&e[t]},e):null}},function(e,t){e.exports=validatorjs},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};t.default=function(e,t,r){var l=null;if(!t.includes("[].")){var u=i({},r,{originalName:r.name,name:t});r.isComplexArray?l=new n.default(e,u):t.endsWith("[]")?(u.name=t.slice(0,-2),l=new a.default(e,u)):l=new o.default(e,u)}return l};var n=l(r(2)),o=l(r(0)),a=l(r(5));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n,o,a,l,u,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),p=r(1),d=y(r(9)),h=y(r(7)),v=y(r(6));function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var g=(i=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"fieldStates",n,this),b(this,"error",o,this),b(this,"errors",a,this),this.onSubmit=function(){return console.warn("No onSubmit() provided")},this.onChange=function(){},this.onCancel=function(){},this.onRemove=function(){},this.fieldConfigs=[],this.fieldGroups={},this.initialOptions={},this.options={},this.initialValues={},b(this,"setRules",l,this),b(this,"resetFormState",u,this),b(this,"validate",s,this);var i=t.collection,f=t.options,p=t.fields,h=t.permissions,v=t.model,y=t.values,m=t.onSubmit,g=t.onChange,O=t.onCancel,j=t.onRemove;this.collection=i,this.options=f||{},this.initialOptions=c({},this.options),this.fieldConfigs=Object.keys(p).map(function(e){return c({},p[e],{name:e})}),this.fieldGroups=this.options.groups||{},this.fieldStates=[],this.permissions=Object.assign({create:!0,delete:!0,edit:!0},h),this.fieldConfigs.forEach(function(e){var t=(0,d.default)(r,e.name,e);t&&r.fieldStates.push(t)}),v&&this.setModel(v),y&&this.init(y),this.onSubmit=m||this.onSubmit,this.onChange=g||this.onChange,this.onCancel=O||this.onCancel,this.onRemove=j||this.onRemove}return f(e,[{key:"setModel",value:function(e){void 0===this.initialOptions.showPristineErrors&&(this.options.showPristineErrors=!e.isNew),this.model=e,this.init(e.attributes?e.attributes.toJS():(0,p.toJS)(e))}},{key:"init",value:function(e){this.fieldStates.forEach(function(t){return t.init((0,h.default)(e,t.name))}),this.initialValues=e,!1!==this.options.validationOnInit&&this.validate()}},{key:"reset",value:function(){this.fieldStates.forEach(function(e){return e.reset()}),this.validate()}},{key:"addFields",value:function(e,t){var r=this;Object.keys(e).forEach(function(t){return r.addField(t,e[t],void 0,{validate:!1})}),t&&this.setValues(t)}},{key:"addField",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.fieldStates.find(function(t){return t.name===e}))r&&this.setValue(e,r,i);else{var n=i.validate,o=void 0===n||n,a=c({},t,{name:e});this.fieldConfigs.push(a);var l=(0,d.default)(this,e,c({},a,{value:r}));l&&this.fieldStates.push(l),o&&this.validate()}}},{key:"removeField",value:function(e){var t=this.fieldConfigs.findIndex(function(t){return t.name===e});t>=0?this.fieldConfigs.splice(t,1):console.warn("Field config not found for field "+e);var r=this.fieldStates.findIndex(function(t){return t.name===e});r>=0?this.fieldStates.splice(r,1):console.warn("Field config not found for field "+e),this.validate()}},{key:"invalidate",value:function(e){this.error=e}},{key:"addFieldsToGroup",value:function(e,t){var r=this;Object.keys(e).forEach(function(e){r.fieldGroups[t].includes(e)||r.fieldGroups[t].push(e)})}},{key:"addToGroup",value:function(e,t,r){return Object.keys(e).includes(t)?e[t].push(r.name):e[t]=[r.name],e}},{key:"isGroupDirty",value:function(e){return!!this.dirtyGroups[e]}},{key:"getMatchingFields",value:function(e){var t=new RegExp(e);return this.fieldStates.filter(function(e){return t.test(e.name)})}},{key:"submit",value:function(e){this.error=null,(e||this.onSubmit)(this,this.getValues())}},{key:"getField",value:function(e){var t=this.fieldStates.find(function(t){return t.name===e});return t||console.warn('Field "'+e+'" not found.'),t}},{key:"getFields",value:function(){return this.fieldStates}},{key:"getOptionValue",value:function(e,t){var r=this.getField(e);if(!r)return!1;if(r.options){var i=void 0!==t?t:r.getValue();return r.options.find(function(e){return e.value===i}).label}console.warn('Field "'+e+'" has no options[], getOptionValue will return undefined"')}},{key:"getValue",value:function(e){return!!this.getField(e)&&this.getField(e).getValue()}},{key:"getValues",value:function(){var e={};return this.fieldStates.forEach(function(t){return(0,v.default)(e,t.name,t.getValue())}),e}},{key:"getDirtyValues",value:function(){var e={};return this.fieldStates.forEach(function(t){return t.dirty?(0,v.default)(e,t.name,t.getValue()):null}),e}},{key:"getDirtyFields",value:function(){return this.fieldStates.filter(function(e){return e.dirty})}},{key:"getFieldGroupValues",value:function(e){var t=this,r={};return this.fieldStates.forEach(function(i){t.fieldGroups[e].includes(i.name)&&(0,v.default)(r,i.name,i.getValue())}),r}},{key:"setValue",value:function(e,t,r){this.getField(e).setValue(t,r)}},{key:"setValues",value:function(e){var t=this;Object.keys(e).forEach(function(r){return t.setValue(r,e[r],{validate:!1})}),this.validate()}},{key:"invalidGroups",get:function(){var e=this,t={};return Object.keys(this.fieldGroups).forEach(function(r){e.fieldGroups[r].forEach(function(i){e.getMatchingFields(i).forEach(function(i){i.valid||i.pristine||(i.isComplexArray?i.errors.forEach(function(n){n.split(",").forEach(function(){t=e.addToGroup(t,r,i)})}):t=e.addToGroup(t,r,i))})})}),t}},{key:"dirtyGroups",get:function(){var e=this,t={};return Object.keys(this.fieldGroups).forEach(function(r){e.fieldGroups[r].forEach(function(i){e.getMatchingFields(i).forEach(function(i){i&&i.dirty&&(t=e.addToGroup(t,r,i))})})}),t}},{key:"incompleteGroups",get:function(){var e=this,t={};return Object.keys(this.fieldGroups).forEach(function(r){e.fieldGroups[r].forEach(function(i){e.getMatchingFields(i).forEach(function(i){!i.valid&&i.pristine&&(t=e.addToGroup(t,r,i))})})}),t}},{key:"completeGroups",get:function(){var e=this;return Object.keys(this.fieldGroups).filter(function(t){return e.fieldGroups[t].every(function(t){return e.getMatchingFields(t).every(function(e){return e.valid})})})}},{key:"dirty",get:function(){return this.fieldStates.some(function(e){return e.dirty})}},{key:"pristine",get:function(){return this.fieldStates.every(function(e){return e.pristine})}},{key:"valid",get:function(){return this.fieldStates.every(function(e){return e.valid})}}]),e}(),n=m(i.prototype,"fieldStates",[p.observable],{enumerable:!0,initializer:null}),o=m(i.prototype,"error",[p.observable],{enumerable:!0,initializer:null}),a=m(i.prototype,"errors",[p.observable],{enumerable:!0,initializer:function(){return[]}}),l=m(i.prototype,"setRules",[p.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){e.fieldConfigs.forEach(function(e){t.initialConfig&&e.name===t.initialConfig.originalName&&(e.rules=r,t.rules=r)}),e.validate()}}}),m(i.prototype,"setModel",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),m(i.prototype,"init",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"init"),i.prototype),m(i.prototype,"reset",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"reset"),i.prototype),m(i.prototype,"addFields",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"addFields"),i.prototype),m(i.prototype,"addField",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"addField"),i.prototype),m(i.prototype,"removeField",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"removeField"),i.prototype),m(i.prototype,"invalidate",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"invalidate"),i.prototype),m(i.prototype,"invalidGroups",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"invalidGroups"),i.prototype),m(i.prototype,"dirtyGroups",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"dirtyGroups"),i.prototype),m(i.prototype,"incompleteGroups",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"incompleteGroups"),i.prototype),m(i.prototype,"completeGroups",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"completeGroups"),i.prototype),m(i.prototype,"dirty",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"dirty"),i.prototype),m(i.prototype,"pristine",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"pristine"),i.prototype),m(i.prototype,"valid",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"valid"),i.prototype),m(i.prototype,"submit",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"submit"),i.prototype),u=m(i.prototype,"resetFormState",[p.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.fieldStates=[],e.fieldConfigs=[],e.fieldGroups={},e.initialOptions={},e.options={},e.initialValues={}}}}),m(i.prototype,"setValues",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"setValues"),i.prototype),s=m(i.prototype,"validate",[p.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.errors=[];var t=e.getValues();return e.fieldStates.forEach(function(r){r.validate(t),r.errors.length&&(e.errors=e.errors.concat(r.errors))}),e.valid}}}),i);t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};t.default=function(e){return function(t){return n.default.createElement(o.default.Consumer,null,function(r){return n.default.createElement(e,i({},t,{form:r}))})}};var n=a(r(3)),o=a(r(4));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.value,r=e.defaultValue,i="function"==typeof r?r():r;return void 0!==t&&null!==t?t:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,r){if(Array.isArray(t)&&Array.isArray(r))return t.length===r.length&&t.every(function(t,i){return e(t,r[i])});if("object"===(void 0===t?"undefined":i(t))&&"object"===(void 0===r?"undefined":i(r))){var o=Object.keys(t||{}),a=Object.keys(r||{});return Array.from(new Set(o.concat(a))).every(function(i){return e(t[i],r[i])})}return t===r||n.includes(t)&&n.includes(r)};var n=[null,void 0,""]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(3),a=s(o),l=s(r(10)),u=s(r(4));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){var t=e.fields,r=e.options,s=void 0===r?{}:r;return function(e){return function(r){function f(){var e,t,r;!function(e,t){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=r=c(this,(e=f.__proto__||Object.getPrototypeOf(f)).call.apply(e,[this].concat(n))),r.state={},c(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,o.Component),n(f,[{key:"render",value:function(){var t=this.state.form;if(!t)return null;var r=t.onSubmit,n=t.onCancel,o=t.onRemove;return a.default.createElement(u.default.Provider,{value:t},a.default.createElement(e,i({},this.props,{form:t,handleSave:r,handleCancel:n,handleRemove:o})))}}],[{key:"getDerivedStateFromProps",value:function(e,r){var i=e.onChange,n=e.permissions,o=e.model,a=e.values;if(!r.form){var u=f.getHandleSave(e),c=f.getHandleCancel(e),p=f.getHandleRemove(e);return{form:new l.default({model:o,values:a,fields:t,options:s,permissions:n,onChange:i,onSubmit:u,onCancel:c,onRemove:p})}}var d=r.form;return e.model&&e.model!==d.model&&d.setModel(e.model),e.values!==d.values&&d.init(e.values),{form:d}}},{key:"getHandleSave",value:function(e){var t=e.handleSave;return function(e,r){return t?t(r):e.model.save(r)}}},{key:"getHandleCancel",value:function(e){var t=e.handleCancel;return function(e){t?t():e.collection&&e.collection.clearSelection()}}},{key:"getHandleRemove",value:function(e){var t=e.handleRemove;return function(e){return t?t():e.model.destroy()}}}]),f}()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(r(14)),n=s(r(11)),o=s(r(10)),a=s(r(0)),l=s(r(2)),u=s(r(5));function s(e){return e&&e.__esModule?e:{default:e}}t.default={Form:i.default,formConsumer:n.default,FormState:o.default,FieldState:a.default,ArrayFieldState:l.default,FlatArrayFieldState:u.default}}]);
//# sourceMappingURL=index.js.map